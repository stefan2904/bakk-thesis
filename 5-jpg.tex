\chapter{The \textit{Java Privacy Guard}} \label{chapter:jpg}

In this chapter we given a brief overview of our implementation of the openPGP message format in Java. We show how we implemented the structures described in chapter 4. We illustrate the structure of our implementation. Furthermore we give an introduction of our API.
Additionally we give discuss the implementation security and possible attacks on the implementation.


As practical part of this thesis we did an implementation of the openPGP message format [RFC4880] in the Java programing language, creating a library workingtitled Java Privacy Guard.

For cryptographic primitives like basic data types, encryption and digest algorithms we used the IAIK-JCE library.

The Packet- and Transferable-structure as described in chapter 4 represents the base-structure of our implementation. All Packets defined in [RFC4880] are implemented as one or more Java-classes. Additionally all relevant Packet-compositions are implemented in the form of Transferable-classes as defined in [RFC4880].

Parsing and constructing of Transferables and other internal data processing heavily rely on Java's stream Architecture. This allows a fast and memory-saving flow of data.

To facilitate the use of our implementation we crated two APIs for access to the library functionality. The APIs are explained in the following section.

\section{The APIs}

In this section we given an overview of our two APIs. We highlight the difference between the two APIs and describe how they implement the openPGP message format. Furthermore we show how the high-level API can be used to perform basic openPGP operations.

The high-level API represents the interface used by users of our library. It mostly consists of Transferable-classes and related toolbox-classes.

The low-level API represents the inner working of the library. It is made up of all Packet-classes and toolbox-classes needed to work with them. This API is used heavily in our implementation, specifically in the high-level API. Furthermore it is possible to use it for behavior not covered by the high-level API.

\todo{Klassendiagramm ohne helper?) gives an overview of the main parts our library.}


\todo{TODO(listing mit code) shows how the high-level API can be used to load a Transferable Public Key. TODO(listing mit code) shows how the loaded key can be used to encrypt and sign data.}


%\section{Issues during Implementation}
%
%\subsection{Unsigned and Java}
%
%\subsection{RFC}
%
%--- Ab hier section Evaluation? ---
%
%\section{Interoperability}
%
%\subsection{Bouncycastle}
%
%\subsection{GnuPG}

\section{Implementation Security}
In this section, we give an overview of the security measures of our implementation. 
Security concerns, as long as they affect the actual design of the openPGP standard, are discussed in chapter 6 and in [RFC4880]. 

Basic security measures like constant-time implementations are taken into account by our implementation.

We use the IAIK-JCE toolbox to perform cryptographic operations and some other tasks. The toolbox is developed with a focus on security and well tested. No other external libraries are used.

Another issue are weak defaults for ciphers and other algorithms. Because of the generic nature of a library our implementation does not set any defaults. Thus the issue of bad defaults is shifted to the user of the library.

Since all openPGP implementations can be used as oracle [TODO schneier paper] it is recommended not to use openPGP in an unprotected and interactive mode. Due to the non-interactive nature of common applications (email) this was not taken into account.

\todo{list attacks and show how our implementation reacts to it?}





